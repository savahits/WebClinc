<!DOCTYPE html>
<html lang="ru" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–ó–∞–ø–∏—Å–∏ –Ω–∞ –ø—Ä–∏–µ–º - –°—Ç–æ–º–∞—Ç–æ–ª–æ–≥–∏—á–µ—Å–∫–∞—è –∫–ª–∏–Ω–∏–∫–∞</title>
    <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
<div class="container">
    <!-- –®–∞–ø–∫–∞ -->
    <div class="header">
        <h1>–ó–∞–ø–∏—Å–∏ –Ω–∞ –ø—Ä–∏–µ–º</h1>
        <p class="subtitle">–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º –∏ –ø–∞—Ü–∏–µ–Ω—Ç–∞–º–∏</p>
        <br/>
        <a th:href="@{/appointments/new}" class="btn btn-success">
            + –ù–æ–≤–∞—è –∑–∞–ø–∏—Å—å
        </a>
    </div>

    <!-- –°–ø–∏—Å–æ–∫ –∑–∞–ø–∏—Å–µ–π -->
    <div class="doctors-grid" th:if="${not #lists.isEmpty(appointments)}">
        <div th:each="appointment : ${appointments}"
             class="doctor-card appointment-card"
             th:classappend="${appointment.status == T(ru.shmelev.webbclinic.webclinc.model.enums.AppointmentStatus).ARRIVED} ? 'arrived' : 'waiting'">

            <!-- –ê–≤–∞—Ç–∞—Ä –ø–∞—Ü–∏–µ–Ω—Ç–∞ -->
            <div class="doctor-avatar patient-avatar">
                <span th:text="${#strings.substring(appointment.patientSurname, 0, 1) + #strings.substring(appointment.patientName, 0, 1)}"></span>
            </div>

            <!-- –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∑–∞–ø–∏—Å–∏ -->
            <div class="doctor-info">
                <h3 class="doctor-name" th:text="${appointment.patientSurname + ' ' + appointment.patientName + ' ' + (appointment.patientPatronymic != null ? appointment.patientPatronymic : '')}"></h3>

                <div class="doctor-specialization">
                    üìû <span th:text="${appointment.patientPhone}"></span>
                    <span th:if="${appointment.isExistingPatient}" style="color: #27ae60; margin-left: 10px;">
                            ‚úì –ü–æ—Å—Ç–æ—è–Ω–Ω—ã–π –ø–∞—Ü–∏–µ–Ω—Ç
                        </span>
                </div>

                <!-- –î–µ—Ç–∞–ª–∏ –∑–∞–ø–∏—Å–∏ -->
                <div style="margin: 10px 0;">
                    <div><strong>üë®‚Äç‚öïÔ∏è –î–æ–∫—Ç–æ—Ä:</strong> <span th:text="${appointment.doctor.surname + ' ' + appointment.doctor.name}"></span></div>
                    <div><strong>üìÖ –î–∞—Ç–∞:</strong> <span th:text="${#temporals.format(appointment.appointmentDate, 'dd.MM.yyyy')}"></span></div>
                    <div><strong>üïí –í—Ä–µ–º—è:</strong> <span th:text="${#temporals.format(appointment.appointmentTime, 'HH:mm')}"></span></div>
                    <div><strong>üìã –£—Å–ª—É–≥–∞:</strong> <span th:text="${appointment.typeService}"></span></div>
                </div>

                <!-- –°—Ç–∞—Ç—É—Å -->
                <div style="margin: 10px 0;">
                        <span th:if="${appointment.status == T(ru.shmelev.webbclinic.webclinc.model.enums.AppointmentStatus).WAITING}"
                              style="background: #fff3cd; color: #856404; padding: 4px 12px; border-radius: 15px; font-size: 0.9rem;">
                            ‚è≥ –û–∂–∏–¥–∞–µ–º
                        </span>
                    <span th:if="${appointment.status == T(ru.shmelev.webbclinic.webclinc.model.enums.AppointmentStatus).ARRIVED}"
                          style="background: #d1ecf1; color: #0c5460; padding: 4px 12px; border-radius: 15px; font-size: 0.9rem;">
                            ‚úÖ –ü—Ä–∏–±—ã–ª
                        </span>
                </div>

                <!-- –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–∏ -->
                <div th:if="${appointment.comments}" style="font-style: italic; color: #7f8c8d; margin: 10px 0;">
                    üí¨ <span th:text="${appointment.comments}"></span>
                </div>

                <!-- –ö–Ω–æ–ø–∫–∏ –¥–µ–π—Å—Ç–≤–∏–π -->
                <div class="doctor-actions">
                    <a th:href="@{/appointments/{id}/edit(id=${appointment.id})}" class="btn btn-primary">
                        ‚úèÔ∏è –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å
                    </a>
                    <a th:href="@{/appointments/{id}/show(id=${appointment.id})}" class="btn btn-secondary">
                        üëÅÔ∏è –ü–æ–¥—Ä–æ–±–Ω–µ–µ
                    </a>
                    <form th:action="@{/appointments/{id}/delete(id=${appointment.id})}" method="post" style="display: inline;">
                        <button type="submit" class="btn btn-danger" onclick="return confirm('–£–¥–∞–ª–∏—Ç—å –∑–∞–ø–∏—Å—å?')">
                            üóëÔ∏è –£–¥–∞–ª–∏—Ç—å
                        </button>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- –°–æ–æ–±—â–µ–Ω–∏–µ –µ—Å–ª–∏ –Ω–µ—Ç –∑–∞–ø–∏—Å–µ–π -->
    <div class="empty-state" th:if="${#lists.isEmpty(appointments)}">
        <h2>–ó–∞–ø–∏—Å–µ–π –ø–æ–∫–∞ –Ω–µ—Ç</h2>
        <p>–°–æ–∑–¥–∞–π—Ç–µ –ø–µ—Ä–≤—É—é –∑–∞–ø–∏—Å—å –Ω–∞ –ø—Ä–∏–µ–º</p>
        <br/>
        <a th:href="@{/appointments/new}" class="btn btn-success">+ –°–æ–∑–¥–∞—Ç—å –∑–∞–ø–∏—Å—å</a>
    </div>

    <!-- –§—É—Ç–µ—Ä -->
    <div class="footer">
        <a th:href="@{/doctors}" class="btn btn-link">‚Üê –ö –¥–æ–∫—Ç–æ—Ä–∞–º</a>
        <a th:href="@{/}" class="btn btn-link">–ù–∞ –≥–ª–∞–≤–Ω—É—é</a>
    </div>
</div>
</body>
</html>